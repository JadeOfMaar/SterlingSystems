@PART[strl-rad-wrap?-125]:NEEDS[B9PartSwitch]
{
	refPower2 = #$refPower$
	refPower4 = #$refPower$
	refPower6 = #$refPower$
	refPower8 = #$refPower$
	@refPower2 *= 2
	@refPower4 *= 4
	@refPower6 *= 6
	@refPower8 *= 8
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = Height
		switcherDescription = Height
		switcherDescriptionPlural = Heights
		SUBTYPE
		{
			name = 1x
			title = 1m
			descriptionSummary = #<b>Energy Transfer</b>: $/refPower$ kW
			transform = 1m
		}
		SUBTYPE
		{
			name = 2x
			title = 2m
			descriptionSummary = #<b>Energy Transfer</b>: $/refPower2$ kW
			transform = 2m
			addedCost = #$/cost$
			@addedCost *= 1
			addedMass = #$/mass$
			@addedMass *= 1
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower2$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 2
					}
				}
			}
		}
		SUBTYPE
		{
			name = 4x
			title = 4m
			descriptionSummary = #<b>Energy Transfer</b>: $/refPower4$ kW
			transform = 4m
			addedCost = #$/cost$
			@addedCost *= 3
			addedMass = #$/mass$
			@addedMass *= 3
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower4$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 4
					}
				}
			}
		}
		SUBTYPE
		{
			name = 6x
			title = 6m
			descriptionSummary = #<b>Energy Transfer</b>: $/refPower6$ kW
			transform = 6m
			addedCost = #$/cost$
			@addedCost *= 5
			addedMass = #$/mass$
			@addedMass *= 5
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower6$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 6
					}
				}
			}
		}
		SUBTYPE
		{
			name = 8x
			title = 8m
			descriptionSummary = #<b>Energy Transfer</b>: $/refPower8$ kW
			transform = 8m
			addedCost = #$/cost$
			@addedCost *= 7
			addedMass = #$/mass$
			@addedMass *= 7
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower8$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 8
					}
				}
			}
		}
	}
}

@PART[strl-rad-wrap?-187]:NEEDS[B9PartSwitch]
{
	refPower2 = #$refPower$
	refPower4 = #$refPower$
	refPower6 = #$refPower$
	refPower8 = #$refPower$
	@refPower2 *= 2
	@refPower4 *= 4
	@refPower6 *= 6
	@refPower8 *= 8
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = Height
		switcherDescription = Height
		switcherDescriptionPlural = Heights
		SUBTYPE
		{
			name = 1x
			title = 1.5m
			descriptionSummary = #<b>Energy Transfer</b>: $/refPower$ kW
			transform = 1m
		}
		SUBTYPE
		{
			name = 2x
			title = 3m
			descriptionSummary = #<b>Energy Transfer</b>: $/refPower2$ kW
			transform = 2m
			addedCost = #$/cost$
			@addedCost *= 1
			addedMass = #$/mass$
			@addedMass *= 1
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower2$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 2
					}
				}
			}
		}
		SUBTYPE
		{
			name = 4x
			title = 6m
			descriptionSummary = #<b>Energy Transfer</b>: $/refPower4$ kW
			transform = 4m
			addedCost = #$/cost$
			@addedCost *= 3
			addedMass = #$/mass$
			@addedMass *= 3
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower4$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 4
					}
				}
			}
		}
		SUBTYPE
		{
			name = 6x
			title = 9m
			descriptionSummary = #<b>Energy Transfer</b>: $/refPower6$ kW
			transform = 6m
			addedCost = #$/cost$
			@addedCost *= 5
			addedMass = #$/mass$
			@addedMass *= 5
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower6$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 6
					}
				}
			}
		}
		SUBTYPE
		{
			name = 8x
			title = 12m
			descriptionSummary = #<b>Energy Transfer</b>: $/refPower8$ kW
			transform = 8m
			addedCost = #$/cost$
			@addedCost *= 7
			addedMass = #$/mass$
			@addedMass *= 7
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower8$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 8
					}
				}
			}
		}
	}
}

@PART[strl-rad-wrap?-250|strl-rad-wrap?-375|strl-rad-wrap?-500]:NEEDS[B9PartSwitch]
{
	refPower2 = #$refPower$
	refPower3 = #$refPower$
	refPower4 = #$refPower$
	@refPower2 *= 2
	@refPower3 *= 3
	@refPower4 *= 4
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = Height
		switcherDescription = Height
		switcherDescriptionPlural = Heights
		SUBTYPE
		{
			name = 1x
			title = 2m
			descriptionSummary = #<b>Energy Transfer</b>: $/refPower$ kW
			transform = 2m
		}
		SUBTYPE
		{
			name = 2x
			title = 4m
			descriptionSummary = #<b>Energy Transfer</b>: $/refPower2$ kW
			transform = 4m
			addedCost = #$/cost$
			@addedCost *= 1
			addedMass = #$/mass$
			@addedMass *= 1
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower2$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 2
					}
				}
			}
		}
		SUBTYPE
		{
			name = 3x
			title = 6m
			descriptionSummary = #<b>Energy Transfer</b>: $/refPower3$ kW
			transform = 6m
			addedCost = #$/cost$
			@addedCost *= 2
			addedMass = #$/mass$
			@addedMass *= 2
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower3$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 3
					}
				}
			}
		}
		SUBTYPE
		{
			name = 4x
			title = 8m
			descriptionSummary = #<b>Energy Transfer</b>: $/refPower4$ kW
			transform = 8m
			addedCost = #$/cost$
			@addedCost *= 3
			addedMass = #$/mass$
			@addedMass *= 3
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower4$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 4
					}
				}
			}
		}
	}
}

@PART[strl-rad-wrap?-mk2]:NEEDS[B9PartSwitch]
{
	refPower2 = #$refPower$
	refPower4 = #$refPower$
	refPower8 = #$refPower$
	@refPower2 *= 2
	@refPower4 *= 4
	@refPower8 *= 8
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = Height
		switcherDescription = Height
		switcherDescriptionPlural = Heights
		SUBTYPE
		{
			name = 1x
			title = Extra Short
			descriptionSummary = #Can hold Mk2 Drone Core and possibly the service bay from Mk2 Stockalike Expansion.<br><br><b>Core Heat Cooling</b>: $/refPower$ kW
			transform = 2short
		}
		SUBTYPE
		{
			name = 2x
			title = Short
			defaultSubtypePriority = 1
			descriptionSummary = #Fits Mk2 Short Fuselage.<br><br><b>Core Heat Cooling</b>: $/refPower2$ kW
			transform = short
			addedCost = #$/cost$
			@addedCost *= 1
			addedMass = #$/mass$
			@addedMass *= 1
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower2$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 2
					}
				}
			}
		}
		SUBTYPE
		{
			name = 4x
			title = Long
			descriptionSummary = #Fits Mk2 Long Fuselage.<br><br><b>Core Heat Cooling</b>: $/refPower4$ kW
			transform = long
			addedCost = #$/cost$
			@addedCost *= 3
			addedMass = #$/mass$
			@addedMass *= 3
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower4$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 4
					}
				}
			}
		}
		SUBTYPE
		{
			name = 8x
			title = Double Long
			descriptionSummary = #Fits 2x Mk2 Long Fuselage.<br><br><b>Core Heat Cooling</b>: $/refPower8$ kW
			transform = 2long
			addedCost = #$/cost$
			@addedCost *= 7
			addedMass = #$/mass$
			@addedMass *= 7
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower8$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 8
					}
				}
			}
		}
	}
}

@PART[strl-rad-wrap?-mk3]:NEEDS[B9PartSwitch]
{
	refPower2 = #$refPower$
	refPower3 = #$refPower$
	refPower4 = #$refPower$
	refPower8 = #$refPower$
	@refPower2 *= 2
	@refPower3 *= 3
	@refPower4 *= 4
	@refPower8 *= 8
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = Height
		switcherDescription = Height
		switcherDescriptionPlural = Heights
		SUBTYPE
		{
			name = 1x
			title = Mono
			descriptionSummary = #Fits Mk3 MonoPropellant Tank.<br><br><b>Core Heat Cooling</b>: $/refPower$ kW
			transform = mono
		}
		SUBTYPE
		{
			name = 2x
			title = Short LF
			defaultSubtypePriority = 1
			descriptionSummary = #Fits Mk3 Short Fuselage.<br><br><b>Core Heat Cooling</b>: $/refPower2$ kW
			transform = lf
			addedCost = #$/cost$
			@addedCost *= 1
			addedMass = #$/mass$
			@addedMass *= 1
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower2$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 2
					}
				}
			}
		}
		SUBTYPE
		{
			name = 3x
			title = Crew
			descriptionSummary = #Fits Mk3 Crew Cabin.<br><br><b>Core Heat Cooling</b>: $/refPower3$ kW
			transform = crew
			addedCost = #$/cost$
			@addedCost *= 2
			addedMass = #$/mass$
			@addedMass *= 2
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower3$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 3
					}
				}
			}
		}
		SUBTYPE
		{
			name = 4x
			title = Medium LF
			descriptionSummary = #Fits Mk3 Medium Fuselage.<br><br><b>Core Heat Cooling</b>: $/refPower4$ kW
			transform = 2lf
			addedCost = #$/cost$
			@addedCost *= 3
			addedMass = #$/mass$
			@addedMass *= 3
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower4$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 4
					}
				}
			}
		}
		SUBTYPE
		{
			name = 8x
			title = Long LF
			descriptionSummary = #Fits Mk3 Long Fuselage.<br><br><b>Core Heat Cooling</b>: $/refPower8$ kW
			transform = 4lf
			addedCost = #$/cost$
			@addedCost *= 7
			addedMass = #$/mass$
			@addedMass *= 7
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleActiveRadiator
				}
				DATA
				{
					maxEnergyTransfer = #$/refPower8$
					@maxEnergyTransfer *= 50
					RESOURCE
					{
						name = ElectricCharge
						rate = #$/MODULE[ModuleActiveRadiator]/RESOURCE/rate$
						@rate *= 8
					}
				}
			}
		}
	}
}

@PART[strl-rad-sink-mk2]:NEEDS[B9PartSwitch]
{
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = Structure
		switcherDescription = Couple
		switcherDescriptionPlural = Couples
		SUBTYPE
		{
			name = 1x
			title = Default
			descriptionSummary = Fits a Mk2 engine.
			transform = bodyLower
			node = bottom
		}
		SUBTYPE
		{
			name = 2x
			title = Bicoupler
			descriptionSummary = Fits 2x 1.25m engines.
			transform = bodyBi
			stackSymmetry = 1
			node = bottom01
			node = bottom02
		}
	}
}

@PART[strl-rad-sink-375]:NEEDS[B9PartSwitch]
{
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = Structure
		switcherDescription = Couple
		switcherDescriptionPlural = Couples
		SUBTYPE
		{
			name = 1x
			title = Default
			descriptionSummary = Fits 1x 3.75m engine.
			node = bottom
		}
		SUBTYPE
		{
			name = 2x
			title = Bicoupler
			descriptionSummary = Fits 2x 1.25m engines.
			transform = 2x
			stackSymmetry = 1
			node = bottom02
			node = bottom04
		}
		SUBTYPE
		{
			name = 3x
			title = Tricoupler
			descriptionSummary =  Fits 3x 1.25m engines.
			transform = 3x
			stackSymmetry = 2
			node = bottom02
			node = bottom05
			node = bottom06
		}
		SUBTYPE
		{
			name = 4x
			title = Quadcoupler
			descriptionSummary =  Fits 4x 1.25m engines.
			transform = 4x
			stackSymmetry = 3
			node = bottom01
			node = bottom02
			node = bottom03
			node = bottom04
		}
	}
}
@PART[strl-rad-sink-500]:NEEDS[B9PartSwitch]
{
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = Structure
		switcherDescription = Couple
		switcherDescriptionPlural = Couples
		SUBTYPE
		{
			name = 1x
			title = Default
			descriptionSummary = Fits 1x 5m engine.
			node = bottom
		}
		SUBTYPE
		{
			name = S1-2x
			title = 1.25m - 2x
			descriptionSummary = Fits 2x 1.25m engines.
			transform = S1_2x
			stackSymmetry = 1
			node = bottom00
			node = bottom03-S1
			node = bottom07-S1
		}
		SUBTYPE
		{
			name = S1-3x
			title = 1.25m - 3x
			descriptionSummary = Fits 3x 1.25m engines.
			transform = S1_3x
			stackSymmetry = 2
			node = bottom00
			node = bottom03-S1
			node = bottom11-S1
			node = bottom12-S1
		}
		SUBTYPE
		{
			name = S1-4x
			title = 1.25m - 4x
			descriptionSummary = Fits 4x 1.25m engines.
			transform = S1_4x
			stackSymmetry = 3
			node = bottom00
			node = bottom01-S1
			node = bottom03-S1
			node = bottom05-S1
			node = bottom07-S1
		}
		SUBTYPE
		{
			name = S1-6x
			title = 1.25m - 6x
			descriptionSummary = Fits 6x 1.25m engines.
			transform = S1_6x
			stackSymmetry = 5
			node = bottom00
			node = bottom03-S1
			node = bottom07-S1
			node = bottom09-S1
			node = bottom10-S1
			node = bottom11-S1
			node = bottom12-S1
		}
		SUBTYPE
		{
			name = S1-8x
			title = 1.25m - 8x
			descriptionSummary = Fits 8x 1.25m engines.
			transform = S1_8x
			stackSymmetry = 7
			node = bottom00
			node = bottom01-S1
			node = bottom02-S1
			node = bottom03-S1
			node = bottom04-S1
			node = bottom05-S1
			node = bottom06-S1
			node = bottom07-S1
			node = bottom08-S1
		}
		SUBTYPE
		{
			name = S1p5-2x
			title = 1.875m - 2x
			descriptionSummary = Fits 2x 1.875m engines.
			transform = S1p5_2x
			stackSymmetry = 1
			node = bottom02-S1p5
			node = bottom04-S1p5
		}
		SUBTYPE
		{
			name = S1p5-3x
			title = 1.875m - 3x
			descriptionSummary = Fits 3x 1.875m engines.
			transform = S1p5_3x
			stackSymmetry = 2
			node = bottom02-S1p5
			node = bottom05-S1p5
			node = bottom06-S1p5
		}
		SUBTYPE
		{
			name = S1p5-4x
			title = 1.875m - 4x
			descriptionSummary = Fits 4x 1.875m engines.
			transform = S1p5_4x
			stackSymmetry = 3
			node = bottom01-S1p5
			node = bottom02-S1p5
			node = bottom03-S1p5
			node = bottom04-S1p5
		}
		SUBTYPE
		{
			name = S2-2x
			title = 2.5m - 2x
			descriptionSummary = Fits 2x 2.5m engines.
			transform = S2_2x
			stackSymmetry = 1
			node = bottom01-S2
			node = bottom02-S2
		}
	}
}

@PART[strl-rad*]:HAS[#refPower2]:NEEDS[B9PartSwitch]:AFTER[SterlingSystems]
{
	!refPower2 = nope
	!refPower3 = nope
	!refPower4 = nope
	!refPower6 = nope
	!refPower8 = nope
}